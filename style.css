body {
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Ubuntu, Cantarell, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    color: #1f2937;
    background:
        radial-gradient(1200px 500px at 15% -10%, rgba(79,70,229,0.07), transparent 60%),
        radial-gradient(1000px 400px at 90% 10%, rgba(16,185,129,0.06), transparent 50%),
        #f6f7fb;
    /* Reduce content jump under fixed bar */
    padding-top: 72px;
    overflow-x: hidden; /* prevent horizontal spill on mobile */
}
.top-bar {
    width: 100%;
    max-width: 100%;
    background: rgba(19, 26, 43, 0.92);
    color: white;
    padding: 14px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    /* Enable wrap on small screens */
    flex-wrap: nowrap;

    position: fixed;
    top: 0;
    left: 0;          /* remove centering hack */
    transform: none;  /* remove centering hack */
    box-sizing: border-box;

    backdrop-filter: saturate(1.2) blur(6px);
    border-bottom: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
}
.top-bar .left,
.top-bar .center,
.top-bar .right {
    display: flex;
    align-items: center;
    gap: 12px;
}
.top-bar a, .top-bar button {
    color: white;
    text-decoration: none;
    margin-left: 0;
    font-size: 16px;
    background: transparent;
    border: 0;
    cursor: pointer;
    padding: 10px 14px;
    border-radius: 10px;
    transition: background-color .2s ease, color .2s ease, transform .06s ease;
}
.top-bar a:hover, .top-bar button:hover {
    text-decoration: none;
    background: rgba(255,255,255,0.12);
}
.top-bar a:active, .top-bar button:active {
    transform: translateY(1px);
}
.content {
    margin-top: 12px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: min(920px, 92vw);
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 14px;
    padding: clamp(16px, 3vw, 28px);
    box-shadow: 0 12px 36px rgba(0,0,0,0.08);
}
/* Visual card for the word */
.display-text, #displayText {
    font-size: clamp(28px, 6vw, 48px);
    font-weight: 800;
    letter-spacing: -0.01em;
    color: #111827;
    margin-bottom: 16px;
}
/* Actions: better button row spacing */
/* REPLACED selectors to be class-based, not scoped to .content */
button.skip-button,
button.reveal-button,
button.audio-button {
    -webkit-appearance: none;
    appearance: none;
    border: 0;
    cursor: pointer;
    padding: 12px 16px;
    border-radius: 12px;
    font-weight: 700;
    font-size: 15px;
    transition: transform .06s ease, box-shadow .2s ease, background .2s ease, color .2s ease, border-color .2s ease;
    margin: 4px 6px;
}

/* Primary — Reveal */
button.reveal-button {
    background: #4f46e5;
    color: #fff;
    box-shadow: 0 8px 18px rgba(79,70,229,0.25);
}
button.reveal-button:hover {
    background: #4338ca;
    box-shadow: 0 10px 22px rgba(79,70,229,0.30);
}
button.reveal-button:active {
    transform: translateY(1px);
}

/* Secondary — Skip */
button.skip-button {
    background: #111827;
    color: #fff;
    box-shadow: 0 8px 18px rgba(0,0,0,0.18);
}
button.skip-button:hover {
    background: #0b1220;
}
button.skip-button:active {
    transform: translateY(1px);
}

/* Tertiary — Audio */
button.audio-button {
    background: #eef2ff;
    color: #3730a3;
    border: 2px solid #c7d2fe;
    box-shadow: none;
}
button.audio-button:hover {
    background: #e0e7ff;
    border-color: #a5b4fc;
}
button.audio-button:active {
    transform: translateY(1px);
}
.word-card-accent {
    width: 100%;
    padding: clamp(14px, 2.5vw, 20px);
    border: 1px solid #e5e7eb;
    border-radius: 14px;
    background: linear-gradient(180deg, rgba(79,70,229,0.06), transparent 40%);
    margin-bottom: 10px;
}
.input-box, #translationInput {
    padding: 12px 14px;
    font-size: 18px;
    width: min(520px, 90vw);
    margin-bottom: 16px;
    border: 2px solid #cfd3dc;
    border-radius: 12px;
    background: #fff;
    color: #1f2937;
    transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
}
.input-box:focus, #translationInput:focus {
    outline: none;
    border-color: #4f46e5;
    box-shadow: 0 0 0 6px rgba(79,70,229,0.12);
}
#translationInput.is-error {
    border-color: #ef4444;
    box-shadow: 0 0 0 6px rgba(239,68,68,0.10);
}
#translationInput.is-success {
    border-color: #10b981;
    box-shadow: 0 0 0 6px rgba(16,185,129,0.12);
}
/* Keep reveal text subtle */
.reveal-text, #revealText {
    font-size: 16px;
    color: #6b7280;
    margin-top: 8px;
}
/* ... existing code ... */
.input-box, #translationInput {
    padding: 12px 14px;
    font-size: 18px;
    width: min(520px, 90vw);
    margin-bottom: 16px;
    border: 2px solid #cfd3dc;
    border-radius: 12px;
    background: #fff;
    color: #1f2937;
    transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
}
.input-box:focus, #translationInput:focus {
    outline: none;
    border-color: #4f46e5;
    box-shadow: 0 0 0 6px rgba(79,70,229,0.12);
}
/* ... existing code ... */

/* Modal styles */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    background: color-mix(in srgb, #0b1020 40%, rgba(0,0,0,0.45));
    justify-content: center;
    align-items: center;
    z-index: 1000;
    padding: 16px; /* reduce padding a bit on phones */
    overscroll-behavior: contain; /* keep scroll contained in modal */
    touch-action: pan-y; /* allow vertical panning */
}

/* Modal panel */
.modal-content, .modal .content, .modal-content {
    background: #ffffff;
    padding: clamp(16px, 3.5vw, 24px);
    border-radius: 14px;
    width: 100%;
    max-width: 720px;     /* prevent going beyond viewport */
    max-width: min(720px, 92vw);
    max-height: 90vh;     /* keep within screen height */
    overflow: auto;       /* scroll inside the modal */
    -webkit-overflow-scrolling: touch; /* iOS smooth scroll */
    text-align: left;
    border: 1px solid #e5e7eb;
    box-shadow: 0 16px 44px rgba(0,0,0,0.18);
    animation: modalIn .18s ease-out;
    box-sizing: border-box;
    overflow-wrap: anywhere;
}
/* Ensure the Options modal stacks items vertically with spacing */
#optionsModal .modal-content {
    display: grid;
    grid-auto-rows: max-content;
    row-gap: 10px;
}

/* Make each label a clean row with aligned checkbox + text */
#optionsModal .modal-content label {
    display: flex;           /* checkbox + text on one line */
    align-items: center;
    gap: 10px;
    white-space: normal;     /* ensure wrapping if needed */
    margin: 0;               /* grid spacing controls gaps */
}

/* Place the Close button at the end/right in this modal */
#optionsModal .close-button {
    justify-self: end;
    float: none;
}

/* Small devices: keep spacing tight but readable */
@media (max-width: 520px) {
    #optionsModal .modal-content {
        row-gap: 8px;
    }
}
/* Make inputs expand correctly within modal */
#wordsModal input[type="file"],
#wordsModal input[type="text"]#languageUrlInput {
    width: 100%;
    box-sizing: border-box;
}

/* When a modal is open, lock the body scroll */
body.modal-open {
    overflow: hidden;
    height: 100vh; /* prevent iOS body scroll jump */
}

/* Small-device tweak: ensure overlay padding doesn’t push content out */
@media (max-width: 520px) {
    .modal {
        padding: 12px;
    }
    .modal-content {
        max-height: 88vh;
    }
}
/* Close button retained but refined */
.close-button {
    background: #ef4444;
    color: white;
    border: none;
    padding: 10px 14px;
    border-radius: 10px;
    cursor: pointer;
    float: right;
    font-weight: 700;
    transition: background-color .2s ease, transform .06s ease, box-shadow .2s ease;
    box-shadow: 0 10px 18px rgba(239,68,68,0.25);
}
.close-button:hover {
    background-color: #dc2626;
}
.close-button:active {
    transform: translateY(1px);
}

/* Words modal — improved layout and controls */
#wordsModal .modal-content {
    width: min(760px, 94vw);
    display: grid;
    grid-auto-rows: max-content;
    row-gap: 12px;
}
#wordsModal .modal-content a {
    display: block;
    font-weight: 700;
    color: #111827;
    margin-top: 6px;
    margin-bottom: 2px;
}
#wordsModal input[type="file"] {
    padding: 10px 12px;
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    width: 100%;
    color: #374151;
}
#wordsModal input[type="text"]#languageUrlInput {
    width: 100%;
    padding: 12px 14px;
    border: 2px solid #cfd3dc;
    border-radius: 12px;
    background: #fff;
    color: #1f2937;
    transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
}
#wordsModal input[type="text"]#languageUrlInput:focus {
    outline: none;
    border-color: #4f46e5;
    box-shadow: 0 0 0 6px rgba(79,70,229,0.12);
}
#wordsModal .modal-content button:not(.close-button) {
    appearance: none;
    border: 0;
    cursor: pointer;
    padding: 10px 14px;
    border-radius: 10px;
    font-weight: 700;
    font-size: 14px;
    transition: transform .06s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
    background: #4f46e5;
    color: #fff;
    box-shadow: 0 8px 18px rgba(79,70,229,0.22);
    width: fit-content;
}
#wordsModal .modal-content button:not(.close-button):hover {
    background: #4338ca;
}
#wordsModal .modal-content button:not(.close-button):active {
    transform: translateY(1px);
}
/* Make the preset language buttons appear as a tidy group */
#wordsModal .modal-content button[onclick*="loadExistingLanguage"] {
    background: #111827;
    color: #fff;
    box-shadow: 0 8px 18px rgba(0,0,0,0.20);
    margin-right: 8px;
    margin-top: 4px;
}
#wordsModal .modal-content button[onclick*="loadExistingLanguage"]:hover {
    background: #0b1220;
}
/* Space around the Close button to avoid crowding */
#wordsModal .close-button {
    margin-top: 8px;
}

/* Responsive tweaks */
@media (max-width: 640px) {
    .top-bar { padding: 12px 14px; }
    .content { padding: 16px; }
    .display-text, #displayText { margin-bottom: 12px; }
    .content .skip-button,
    .content .reveal-button,
    .content .audio-button { width: 100%; }
    #wordsModal .modal-content { row-gap: 10px; }
}

/* Responsive: medium screens — tighten spacing and fonts */
@media (max-width: 768px) {
    .top-bar {
        padding: 12px 14px;
        gap: 8px;
    }
    .top-bar .left,
    .top-bar .right {
        gap: 8px;
    }
    .top-bar a, .top-bar button {
        font-size: 14px;
        padding: 8px 10px;
        border-radius: 8px;
    }
    .top-bar .center h2,
    #currentLanguage {
        font-size: 18px;
        margin: 0;
        white-space: nowrap;
    }
}

/* Small screens — enforce 2 rows using CSS Grid:
   Row 1: title (center)
   Row 2: left buttons | right buttons */
@media (max-width: 520px) {
    .top-bar {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-areas:
          "center center"
          "left   right";
        align-items: center;
        gap: 8px 10px;
        padding: 10px 12px;
    }

    .top-bar .center {
        grid-area: center;
        display: flex;
        justify-content: center;
    }
    .top-bar .left {
        grid-area: left;
        display: flex;
        justify-content: flex-start;
        min-width: 0;
        gap: 6px;
    }
    .top-bar .right {
        grid-area: right;
        display: flex;
        justify-content: flex-end;
        min-width: 0;
        gap: 6px;
    }

    .top-bar a, .top-bar button {
        font-size: 13px;
        padding: 7px 9px;
        border-radius: 8px;
        white-space: nowrap;
    }

    .top-bar .center h2,
    #currentLanguage {
        font-size: 16px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 90vw;
        margin: 0;
    }

    /* Account for increased bar height */
    body {
        padding-top: 100px;
    }
}

/* Ultra-small screens — stack buttons if needed */
@media (max-width: 380px) {
    .top-bar .left, .top-bar .right {
        flex: 1 1 100%;
        justify-content: center;
        gap: 6px;
    }
    body {
        padding-top: 112px;
    }
}
